<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ιατρικό Πληροφοριακό Σύστημα</title>

<style>
body{
    font-family: Arial;
    background:#111;
    color:white;
    padding:20px;
}
input,button{
    padding:10px;
    margin:5px;
}
.card{
    background:#222;
    padding:15px;
    margin-top:15px;
    border-radius:10px;
}
img{
    max-width:300px;
    margin-top:10px;
}
</style>

</head>
<body>

<h1>Διαχείριση Ασθενών</h1>

<div class="card">
<h2>Νέος Ασθενής</h2>

<input id="amka" placeholder="ΑΜΚΑ">
<input id="first" placeholder="Όνομα">
<input id="last" placeholder="Επώνυμο">
<button onclick="savePatient()">Αποθήκευση</button>

</div>

<div class="card">
<h2>Αναζήτηση ΑΜΚΑ</h2>
<input id="search_amka" placeholder="ΑΜΚΑ">
<button onclick="search()">Αναζήτηση</button>

<div id="result"></div>
</div>

<script>

const API="https://andcon.onrender.com"

async function savePatient(){

    const response=await fetch(API+"/patients",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            amka:document.getElementById("amka").value,
            first_name:document.getElementById("first").value,
            last_name:document.getElementById("last").value
        })
    })

    const data=await response.json()
    alert("Αποθηκεύτηκε με ID "+data.patient_id)
}

async function search(){

    const amka=document.getElementById("search_amka").value
    const response=await fetch(API+"/search?amka="+amka)
    const data=await response.json()

    document.getElementById("result").innerHTML=
        "<pre>"+JSON.stringify(data,null,2)+"</pre>"
}

</script>

</body>
</html>
